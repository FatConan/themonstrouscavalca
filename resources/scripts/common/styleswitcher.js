define(["jquery", "underscore"], function($, _){    return class StyleSwitcher{        constructor(){            this.styleIndex = {};            this.styleList = [];            this.currentStyleIndex = null;            this.defaultStyleSheet = null;            this.indexStyleSheets();            this.switcher = $("nav .styler a");            let nextTitle = this.styleList[(this.currentStyleIndex + 1) % this.styleList.length];            this.switcher.prop("title", "Style Switcher - Next up: \"" + nextTitle + "\"");            this.switcher.on("click", function(e){                e.preventDefault();                this.currentStyleIndex = (this.currentStyleIndex + 1) % this.styleList.length;                this.setActiveStyleSheet(this.styleList[this.currentStyleIndex]);                let nextTitle = this.styleList[(this.currentStyleIndex + 1) % this.styleList.length];                this.switcher.prop("title", "Style Switcher - Next up: \"" + nextTitle + "\"");            }.bind(this));        }        indexStyleSheets(){            const links = document.getElementsByTagName("link");            let linkEl;            for(let i = 0; (linkEl = links[i]); i++){                let title = linkEl.getAttribute("title");                if(linkEl.getAttribute("rel").indexOf("style") !== -1 && title){                    this.styleIndex[title] = linkEl;                    this.styleList.push(title);                    if(linkEl.getAttribute("rel").indexOf("alt") === -1){                        this.currentStyleIndex = i;                        this.defaultStyleSheet = title;                    }else{                        linkEl.disabled = true;                        linkEl.setAttribute("rel", "stylesheet");                    }                }            }            for(let i=0; i<this.styleList.length; i++){                let index = this.styleList[i];                if(this.styleIndex[index].getAttribute("rel").indexOf("alt") === -1){                    this.currentStyleIndex = i;                }            }        }        setActiveStyleSheet(title){            if(!this.styleIndex[title]){                title = this.defaultStyleSheet;            }            for(let index in this.styleIndex){                if(this.styleIndex.hasOwnProperty(index)){                   console.log(title, index, index !== title);                   this.styleIndex[index].disabled = (index !== title);                }            }        }    };});